<!-- Copyright (c) 2025 Franz Steinkress
     Licensed under the MIT License - see LICENSE for details -->

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Entwurfsmuster Vorschau</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <img width="32" height="32" src="./resources/fs.ico" alt="Icon"/>
    <h1>Entwurfsmuster</h1>
</div>

<div class="overlay-box" id="overlayBox">
    <div class="nav-arrows">
        <button id="leftBtn" class="arrow left">←</button>
        <button id="rightBtn" class="arrow right">→</button>
    </div>
    <div class="text">
        <div class="line1">Entwurfsmuster</div>
        <div class="line2" id="description">Beschreibung</div>
    </div>
    <img src="./assets/proxy.png" alt="Screenshots des Entwurfsmuster">
    <button id="closeBtn">Bild 1 von 23</button>
</div>

<script>
    const images = [
        "AbstractFactory.png", "Builder.png", "FactoryMethod.png", "Prototype.png", "Singleton.png", "ClassAdapter.png", 
        "Bridge.png", "Decorator.png", "Facade.png", "Flyweight.png", "Composite.png", "Proxy.png", "Command.png", 
        "Observer.png", "Visitor.png", "Interpreter.png", "Iterator.png", "Memento.png", "TemplateMethod.png", 
        "Strategy.png", "Mediator.png", "State.png", "ChainOfResponsibility.png"
    ];

    const descriptions = [
        "Erzeugungsmuster Abstrakte Fabrik", "Erzeugungsmuster Erbauer", "Erzeugungsmuster Fabrikmethode", "Erzeugungsmuster Prototyp", 
        "Erzeugungsmuster Singleton", "Strukturmuster Klassenadapter", "Strukturmuster Brücke", "Strukturmuster Dekorierer", "Strukturmuster Fassade", 
        "Strukturmuster Fliegengewicht", "Strukturmuster Kompositum", "Strukturmuster Proxy", "Verhaltensmuster Befehl", "Verhaltensmuster Beobachter", 
        "Verhaltensmuster Besucher", "Verhaltensmuster Interpreter", "Verhaltensmuster Iterator", "Verhaltensmuster Memento", "Verhaltensmuster Schablonenmethode", 
        "Verhaltensmuster Strategie", "Verhaltensmuster Vermittler", "Verhaltensmuster Zustand", "Verhaltensmuster Zuständigkeitskette"
    ];

    const dominantColors = [
        "#DDE3E1", "#DDE3E1", "#DDE3E1", "#DDE3E1", "#DDE3E1",
        "#F5EBD6", "#F5EBD6", "#F5EBD6", "#F5EBD6", "#F5EBD6", "#F5EBD6", "#F5EBD6", 
        "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4", "#D3D8D4"
    ];

    const fontColors = [
        "#2C2C2C", "#2C2C2C", "#2C2C2C", "#2C2C2C", "#2C2C2C",
        "#3B3B3B", "#3B3B3B", "#3B3B3B", "#3B3B3B", "#3B3B3B", "#3B3B3B", "#3B3B3B",
        "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A", "#2A2A2A"
    ];

    let imageIndex = 0;
    const img = document.querySelector(".overlay-box img");
    const button = document.getElementById("closeBtn");
    const desc = document.getElementById("description");
    const overlayBox = document.getElementById("overlayBox");

    function updateView() {
        img.src = `./assets/${images[imageIndex]}`;
        desc.innerText = descriptions[imageIndex] || "Keine Beschreibung verfügbar";
        button.innerText = `Bild ${imageIndex + 1} von ${images.length}`;
        overlayBox.style.backgroundColor = dominantColors[imageIndex];
        overlayBox.style.color = fontColors[imageIndex];
    }

    function nextImage() {
        imageIndex = (imageIndex + 1) % images.length;
        updateView();
    }

    function prevImage() {
        imageIndex = (imageIndex - 1 + images.length) % images.length;
        updateView();
    }

    document.getElementById("leftBtn").addEventListener("click", prevImage);
    document.getElementById("rightBtn").addEventListener("click", nextImage);

    document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") prevImage();
        if (e.key === "ArrowRight") nextImage();
    });

    let startX = 0;
    document.addEventListener("touchstart", (e) => startX = e.touches[0].clientX);
    document.addEventListener("touchend", (e) => {
        const dx = e.changedTouches[0].clientX - startX;
        if (Math.abs(dx) > 50) {
            dx > 0 ? prevImage() : nextImage();
        }
    });

    updateView();
</script>
</body>
</html>
